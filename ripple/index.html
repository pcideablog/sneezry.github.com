<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html><head><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Ripple Price</title><style>*{margin:0;padding:0;font-family:"HelveticaNeueLight","HelveticaNeue-Light","Helvetica Neue Light","HelveticaNeue","Helvetica Neue",'TeXGyreHerosRegular',"Helvetica","Tahoma","Geneva","Arial",sans-serif;font-weight:300;font-stretch:normal;-webkit-user-select:none;}body{color:black;background:white;font-size:36px;}a{font-size:12px;text-decoration:none;line-height:60px;display:block;width:100%;text-align:center;color:blue;}#headline{height:50px;padding:5px;text-align:center;position:relative;border-bottom:1px gray solid;}.button{border:1px gray solid;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px;font-size:22px;line-height:36px;padding:0 20px;}.currency_gateway,.gateway_currency{height:50px;padding:5px;border-bottom:1px #ccc solid;background:#e2e2e2;}.currency_gateway:last-child,.gateway_currency:last-child{border:none;}.currency_gateway div,.gateway_currency div{font-size:16px;line-height:25px;}.currency_code,.gateway_name{line-height:50px;padding:5px;border-bottom:1px gray solid;}.currency_code:last-child,.gateway_name:last-child{border:none;}.currency_gateway_name,.gateway_currency_code{font-weight:bold;}.currency_gateways,.gateway_currency2{display:none;}.currency_gateways[open="true"],.gateway_currency2[open="true"]{display:block;}#gateways{display:none;}.currency_gateway_bit_ask span,.gateway_currency_bit_ask span{margin:0 10px;}</style></head><body><div id="main"><div id="headline"><img src="logo.png" height="50" onclick="changeMethod()" ontouch="changeMethod()" /></div></div><a href="https://ripple.com//send?to=rNDcxEDhb5yMMp1wrGq6hjMp3dom71RPjZ" target="_blank">Donate: rNDcxEDhb5yMMp1wrGq6hjMp3dom71RPjZ</a><script>var connecting=!0,gateways=[{name:"SnapSwap",addresses:[{hash:"rMwjYedjc7qqtKYVLiAccJSmCwih4LnE2q",currency:["USD"]}]},{name:"BITSTAMP",addresses:[{hash:"rvYAfWj5gh67oV6fW32ZzP3Aw4Eubs59B",currency:"AUD BTC CHF EUR GBP JPY USD".split(" ")}]},{name:"rippleCN",addresses:[{hash:"rnuF96W4SZoCJmbHYBFoJZpR8eCaxNvekK",currency:["BTC","CNY","LTC"]}]},{name:"RippleChina",addresses:[{hash:"razqQKzJRdB4UxFPWf5NEpEG3WMkmwgcXA",currency:["BTC","CNY","LTC"]}]},{name:"Justcoin",addresses:[{hash:"rJHygWcTLVpSXkowott6kzgZU6viQSVYM1",currency:["BTC","LTC","NOK"]}]}],currency=[{code:"AUD",gateways:[{name:"BITSTAMP",address:"rvYAfWj5gh67oV6fW32ZzP3Aw4Eubs59B"}]},{code:"BTC",gateways:[{name:"BITSTAMP",address:"rvYAfWj5gh67oV6fW32ZzP3Aw4Eubs59B"},{name:"rippleCN",address:"rnuF96W4SZoCJmbHYBFoJZpR8eCaxNvekK"},{name:"RippleChina",address:"razqQKzJRdB4UxFPWf5NEpEG3WMkmwgcXA"},{name:"Justcoin",address:"rJHygWcTLVpSXkowott6kzgZU6viQSVYM1"}]},{code:"CHF",gateways:[{name:"BITSTAMP",address:"rvYAfWj5gh67oV6fW32ZzP3Aw4Eubs59B"}]},{code:"CNY",gateways:[{name:"rippleCN",address:"rnuF96W4SZoCJmbHYBFoJZpR8eCaxNvekK"},{name:"RippleChina",address:"razqQKzJRdB4UxFPWf5NEpEG3WMkmwgcXA"}]},{code:"EUR",gateways:[{name:"BITSTAMP",address:"rvYAfWj5gh67oV6fW32ZzP3Aw4Eubs59B"}]},{code:"GBP",gateways:[{name:"BITSTAMP",address:"rvYAfWj5gh67oV6fW32ZzP3Aw4Eubs59B"}]},{code:"JPY",gateways:[{name:"BITSTAMP",address:"rvYAfWj5gh67oV6fW32ZzP3Aw4Eubs59B"}]},{code:"LTC",gateways:[{name:"rippleCN",address:"rnuF96W4SZoCJmbHYBFoJZpR8eCaxNvekK"},{name:"RippleChina",address:"razqQKzJRdB4UxFPWf5NEpEG3WMkmwgcXA"},{name:"Justcoin",address:"rJHygWcTLVpSXkowott6kzgZU6viQSVYM1"}]},{code:"NOK",gateways:[{name:"Justcoin",address:"rJHygWcTLVpSXkowott6kzgZU6viQSVYM1"}]},{code:"USD",gateways:[{name:"SnapSwap",address:"rMwjYedjc7qqtKYVLiAccJSmCwih4LnE2q"},{name:"BITSTAMP",address:"rvYAfWj5gh67oV6fW32ZzP3Aw4Eubs59B"}]}];function createDOM(){var a=document.createElement("div");a.id="currency";document.getElementById("main").appendChild(a);for(var b in currency){var c=document.createElement("div");c.id=currency[b].code;c.className="currency_code";c.innerHTML=currency[b].code;c.setAttribute("ind",b);c.onclick=openCurrencyGateways;c.ontouch=openCurrencyGateways;a.appendChild(c);c=document.createElement("div");c.id=currency[b].code+"_gateways";c.className="currency_gateways";a.appendChild(c);for(var d in currency[b].gateways){var e=document.createElement("div");e.id=currency[b].code+"_"+currency[b].gateways[d].name;e.className="currency_gateway";e.innerHTML='<div class="currency_gateway_name">'+currency[b].gateways[d].name+'</div><div class="currency_gateway_bit_ask"><span id="'+currency[b].code+"_"+currency[b].gateways[d].name+'_bit">Bit: Loading...</span><span id="'+currency[b].code+"_"+currency[b].gateways[d].name+'_ask">Ask: Loading...</span></div>';c.appendChild(e)}}a=document.createElement("div");a.id="gateways";document.getElementById("main").appendChild(a);for(b in gateways)for(d in c=document.createElement("div"),c.id=gateways[b].name,c.className="gateway_name",c.innerHTML=gateways[b].name,c.setAttribute("ind",b),c.onclick=openGatewayCurrency,c.ontouch=openGatewayCurrency,a.appendChild(c),c=document.createElement("div"),c.id=gateways[b].name+"_currency",c.className="gateway_currency2",a.appendChild(c),gateways[b].addresses)for(var f in gateways[b].addresses[d].currency)e=document.createElement("div"),e.id=gateways[b].name+"_"+gateways[b].addresses[d].currency[f],e.className="gateway_currency",e.innerHTML='<div class="gateway_currency_code">'+gateways[b].addresses[d].currency[f]+'</div><div class="gateway_currency_bit_ask"><span id="'+gateways[b].name+"_"+gateways[b].addresses[d].currency[f]+'_bit">Bit: Loading...</span><span id="'+gateways[b].name+"_"+gateways[b].addresses[d].currency[f]+'_ask">Ask: Loading...</span></div>',c.appendChild(e)}function openCurrencyGateways(){location.href='#'+this.id;if(!connecting){getPriceByCurrency(currency[this.getAttribute("ind")]);var a=document.getElementById(this.id+"_gateways");"true"==a.getAttribute("open")?a.removeAttribute("open"):a.setAttribute("open","true")}}function openGatewayCurrency(){location.href='#'+this.id;if(!connecting){getPriceByGateway(gateways[this.getAttribute("ind")]);var a=document.getElementById(this.id+"_currency");"true"==a.getAttribute("open")?a.removeAttribute("open"):a.setAttribute("open","true")}}createDOM();var lookupList=[],wsServer="wss://s1.ripple.com",websocket=new WebSocket(wsServer);websocket.onopen=function(a){onOpen(a)};websocket.onclose=function(a){onClose(a)};websocket.onmessage=function(a){onMessage(a)};websocket.onerror=function(a){onError(a)};function onOpen(a){console.log("Connected to WebSocket server.");connecting=!1;for(var b in currency)getPriceByCurrency(currency[b]);for(b in gateways)getPriceByGateway(gateways[b])}function onClose(a){console.log("Disconnected")}function onMessage(a){showData(a.data)}function onError(a){console.log("Error occured: "+a.data)}function getData(a,b,c,d){websocket.send("sell"==d?'{"command":"subscribe","id":'+a+',"books":[{"snapshot":true,"taker_gets":{"currency":"XRP"},"taker_pays":{"currency":"'+c+'","issuer":"'+b+'"}}]}':'{"command":"subscribe","id":'+a+',"books":[{"snapshot":true,"taker_gets":{"currency":"'+c+'","issuer":"'+b+'"},"taker_pays":{"currency":"XRP"}}]}')}function getPriceByCurrency(a){for(var b in a.gateways)"got"!=document.getElementById(a.code+"_"+a.gateways[b].name).getAttribute("sell")&&(lookupList.push({method:"currency",gateway:a.gateways[b].name,code:a.code,type:"sell"}),getData(lookupList.length,a.gateways[b].address,a.code,"sell")),"got"!=document.getElementById(a.code+"_"+a.gateways[b].name).getAttribute("buy")&&(lookupList.push({method:"currency",gateway:a.gateways[b].name,code:a.code,type:"buy"}),getData(lookupList.length,a.gateways[b].address,a.code,"buy"))}function getPriceByGateway(a){for(var b in a.addresses)for(var c in a.addresses[b].currency)"got"!=document.getElementById(a.name+"_"+a.addresses[b].currency[c]).getAttribute("sell")&&(lookupList.push({method:"gateway",gateway:a.name,code:a.addresses[b].currency[c],type:"sell"}),getData(lookupList.length,a.addresses[b].hash,a.addresses[b].currency[c],"sell")),"got"!=document.getElementById(a.name+"_"+a.addresses[b].currency[c]).getAttribute("buy")&&(lookupList.push({method:"gateway",gateway:a.name,code:a.addresses[b].currency[c],type:"buy"}),getData(lookupList.length,a.addresses[b].hash,a.addresses[b].currency[c],"buy"))}function showData(a){a=JSON.parse(a);if(a.id){var b=lookupList[a.id-1];if("sell"==b.type){var c=0,d;for(d in a.result.offers){var e=1E6*Number(a.result.offers[d].TakerPays.value)/Number(a.result.offers[d].TakerGets);if(0==c||c>e)c=e}"currency"==b.method?(document.getElementById(b.code+"_"+b.gateway).setAttribute("sell","got"),document.getElementById(b.code+"_"+b.gateway+"_ask").innerHTML="Ask: "+c.toFixed(8)):(document.getElementById(b.gateway+"_"+b.code).setAttribute("sell","got"),document.getElementById(b.gateway+"_"+b.code+"_ask").innerHTML="Ask: "+c.toFixed(8))}else{c=0;for(d in a.result.offers)if(e=1E6*Number(a.result.offers[d].TakerGets.value)/Number(a.result.offers[d].TakerPays),0==c||c<e)c=e;"currency"==b.method?(document.getElementById(b.code+"_"+b.gateway).setAttribute("buy","got"),document.getElementById(b.code+"_"+b.gateway+"_bit").innerHTML="Bit: "+c.toFixed(8)):(document.getElementById(b.gateway+"_"+b.code).setAttribute("buy","got"),document.getElementById(b.gateway+"_"+b.code+"_bit").innerHTML="Bit: "+c.toFixed(8))}}}function changeMethod(){"none"!=document.getElementById("currency").style.display?(document.getElementById("currency").style.display="none",document.getElementById("gateways").style.display="block"):(document.getElementById("gateways").style.display="none",document.getElementById("currency").style.display="block")};</script></body></html>